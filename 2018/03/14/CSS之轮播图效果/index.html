<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Xiaoqi&#39;s blog</title>
<!--   <link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet"> -->
  <!-- theme为主题的config.yml -->
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/Graffiti.css">
    
  
</head>
<body>

<!-- 导航栏 -->
<!-- 导航栏部分 -->
<div id="navigationBar-bg" class="navigationBar-bg" style="background: url('/img/navigationBar.jpg') no-repeat;">
  <div id="navigationBar-content" class="navigationBar-content">
    <div class="personal-block">
      <div class="portrait">
        <div class="portrait-background">
          <div class="portrait-img" style="background: url('/img/portrait.jpg') no-repeat; background-size: 100%"></div>
        </div>
      </div>
      <div class="nickname"><span>Xiaoqi&#39;s blog</span></div>
    </div>

    <div class="navigationBar-menu">
      
        <li>
          <div class="menu-hover Home-hover"></div>
          <a id="Home" href="/">Home</a>
        </li>
      
        <li>
          <div class="menu-hover Archives-hover"></div>
          <a id="Archives" href="/archives">Archives</a>
        </li>
      
        <li>
          <div class="menu-hover Tags-hover"></div>
          <a id="Tags" href="/tags">Tags</a>
        </li>
      
        <li>
          <div class="menu-hover Github-hover"></div>
          <a id="Github" href="https://github.com/Qxiaoqi">Github</a>
        </li>
      
    </div>
  </div>
</div>

<!-- layout渲染部分 -->
<div id="content-outer" class="content-outer">
  <div class="content-margin">
    <div id="content-inner" class="content-inner">
      
<article id="post" class="post">
	<div class="post-title">
  		<span class="post-title-link">页面效果之轮播图效果</span>
	</div>
  <!-- <img src="/assets/2018-3-14/before.jpg" height="300px"> -->
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>做项目的时候刚好要做轮播图，之前在微信小程序上做过，但是那个非常的简单，因为很多功能已经封装在了API里面，所以只需要指定几张图片就能达成效果。现在将使用JQuery来实现轮播图效果。</p>
<a id="more"></a>
<h2 id="轮播图技术实现"><a href="#轮播图技术实现" class="headerlink" title="轮播图技术实现"></a>轮播图技术实现</h2><h3 id="轮播图效果"><a href="#轮播图效果" class="headerlink" title="轮播图效果"></a>轮播图效果</h3><p><img src="/assets/2018-3-14/effect.jpg" height="300px"></p>
<p>轮播图下方有每个图的按钮，鼠标放在上面即会跳转到相应页面，而且当鼠标停留在图片上的时候，轮播图将会暂停，以便当用户被某个图片吸引时不至于跳到另一张图片。</p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>轮播图就是将所有的图片使用float来将所有的图片都放成一行上，然后通过js控制图片的移动，原理图如下:</p>
<p><img src="/assets/2018-3-14/principle.jpg" height="300px"></p>
<p>然后还有一处要注意的地方，就是当移动到最后一张图的时候，为了让其依然向左拉动，必须在最后加上复制的第一张图，使之连贯，动画结束后重新定位到起点，然后将最后一张删去</p>
<h3 id="代码部分"><a href="#代码部分" class="headerlink" title="代码部分"></a>代码部分</h3><h4 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-wrapper"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- banner图像 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-focus"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-img banner-img0"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-img banner-img1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-img banner-img2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-img banner-img3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- banner切换按钮 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner-btn"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里图片并没有采用img标签，而是选择了div标签，然后使用background属性的url指定图片地址，这种方法的好处是不用指定图片的大小，通过设置background-size可以让图片达到充满目标而且多余的部分不显示。因此以后尽量不要使用img标签。</p>
<h4 id="less代码"><a href="#less代码" class="headerlink" title="less代码"></a>less代码</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.banner-wrapper</span> &#123;</span><br><span class="line">	<span class="comment">/*轮播图*/</span></span><br><span class="line">	<span class="attribute">padding-top</span>: <span class="number">80px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">550px</span>;</span><br><span class="line">	// background-color: #DB6A6A;</span><br><span class="line">	<span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line"></span><br><span class="line">	<span class="selector-class">.banner-focus</span> &#123;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">550px</span>;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">		// background-color: #351818;</span><br><span class="line">		<span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</span><br><span class="line">		<span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line"></span><br><span class="line">		<span class="selector-tag">ul</span> &#123;</span><br><span class="line">			<span class="attribute">position</span>: absolute;</span><br><span class="line">			<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">			li &#123;</span><br><span class="line">				<span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">				<span class="selector-tag">width</span>: 100%;</span><br><span class="line">				<span class="selector-tag">height</span>: 550<span class="selector-tag">px</span>;</span><br><span class="line">				<span class="selector-tag">list-style</span>: <span class="selector-tag">none</span>;</span><br><span class="line"></span><br><span class="line">				<span class="selector-class">.banner-img</span> &#123;</span><br><span class="line">					<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">					<span class="attribute">height</span>: <span class="number">550px</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="selector-class">.banner-img0</span> &#123;</span><br><span class="line">					<span class="comment">/*后面改路径*/</span></span><br><span class="line">					<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"./test/images/0.jpg"</span>) no-repeat center;</span><br><span class="line">					<span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="selector-class">.banner-img1</span> &#123;</span><br><span class="line">					<span class="comment">/*后面改路径*/</span></span><br><span class="line">					<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"./test/images/1.jpg"</span>) no-repeat center;</span><br><span class="line">					<span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="selector-class">.banner-img2</span> &#123;</span><br><span class="line">					<span class="comment">/*后面改路径*/</span></span><br><span class="line">					<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"./test/images/2.jpg"</span>) no-repeat center;</span><br><span class="line">					<span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="selector-class">.banner-img3</span> &#123;</span><br><span class="line">					<span class="comment">/*后面改路径*/</span></span><br><span class="line">					<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"./test/images/3.jpg"</span>) no-repeat center;</span><br><span class="line">					<span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="selector-class">.banner-btn</span> &#123;</span><br><span class="line">		<span class="attribute">position</span>: absolute;</span><br><span class="line">		<span class="attribute">bottom</span>: <span class="number">30px</span>;</span><br><span class="line">		<span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">		<span class="attribute">margin-left</span>: -<span class="number">52px</span>;</span><br><span class="line"></span><br><span class="line">		span &#123;</span><br><span class="line">			// position: absolute;</span><br><span class="line">			<span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">			<span class="selector-tag">width</span>: 6<span class="selector-tag">px</span>;</span><br><span class="line">			<span class="selector-tag">height</span>: 6<span class="selector-tag">px</span>;</span><br><span class="line">			<span class="selector-tag">background-color</span>: <span class="selector-id">#E0DFE0</span>;</span><br><span class="line">			<span class="selector-tag">border-radius</span>: 50%;</span><br><span class="line">			<span class="selector-tag">margin-right</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">			<span class="selector-tag">cursor</span>: <span class="selector-tag">pointer</span>;</span><br><span class="line"></span><br><span class="line">			&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">				<span class="attribute">background-color</span>: <span class="number">#595959</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>css部分需要注意的是</p>
<ul>
<li><p>最外层banner-wrapper用<code>position:relative</code>来给内层banner-focus的<code>position:absolute</code>定位</p>
</li>
<li><p>banner-focus需要使用<code>overflow:relative</code>来将多余的部分隐藏</p>
</li>
<li><p>若想将内层元素用width百分比来表示，必须指定其父元素宽度才能成功</p>
</li>
<li><p>设置background来让其自动填充，省去了切图的麻烦</p>
</li>
</ul>
<h4 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//============================轮播图部分函数=====================</span></span><br><span class="line"><span class="comment">/*轮播图主函数*/</span></span><br><span class="line"><span class="keyword">var</span> bannerRolling = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sWidth = $(<span class="string">".banner-focus"</span>).width(); <span class="comment">//获取焦点图的宽度（显示面积）  </span></span><br><span class="line">    <span class="keyword">var</span> len = $(<span class="string">".banner-focus ul li"</span>).length; <span class="comment">//获取焦点图个数  </span></span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">var</span> picTimer;  </span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(sWidth);</span><br><span class="line">    <span class="built_in">console</span>.log(len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//为小按钮添加鼠标滑入事件，以显示相应的内容  </span></span><br><span class="line">    $(<span class="string">".banner-btn span"</span>).mouseenter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        index = $(<span class="string">".banner-btn span"</span>).index(<span class="keyword">this</span>);  </span><br><span class="line">        showPics(index, sWidth);</span><br><span class="line">        <span class="built_in">console</span>.log(index, sWidth);</span><br><span class="line">        <span class="comment">// console.log("按钮滑入");  </span></span><br><span class="line">    &#125;);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    本例为左右滚动，即所有li元素都是在同一排向左浮动，</span></span><br><span class="line"><span class="comment">    所以这里需要计算出外围ul元素的宽度</span></span><br><span class="line"><span class="comment">    */</span>  </span><br><span class="line">    $(<span class="string">".banner-focus ul"</span>).css(<span class="string">"width"</span>,sWidth * (len+<span class="number">1</span>));  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    因为图片未设置固定宽度，所以之前设置的100%会随着父元素变宽而撑大，</span></span><br><span class="line"><span class="comment">    所以此处应该相应设置为父元素的1/(len+1)</span></span><br><span class="line"><span class="comment">    */</span>    </span><br><span class="line">    $(<span class="string">".banner-focus ul li"</span>).css(<span class="string">"width"</span>,sWidth * (len+<span class="number">1</span>) / <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*直接自动播放*/</span></span><br><span class="line">    picTimer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span>(index === len) &#123; <span class="comment">//如果索引值等于li元素个数，说明最后一张图播放完毕，接下来要显示第一张图，即调用showFirPic()，然后将索引值清零  </span></span><br><span class="line">            index = <span class="number">0</span>;  </span><br><span class="line">            showFirstPic(len, sWidth);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//如果索引值不等于li元素个数，按普通状态切换，调用showPics()  </span></span><br><span class="line">            showPics(index, sWidth);  </span><br><span class="line">        &#125;  </span><br><span class="line">        index++;  </span><br><span class="line">    &#125;,<span class="number">4000</span>); <span class="comment">//此2000代表自动播放的间隔，单位：毫秒 </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标滑上焦点图时停止自动播放，滑出时开始自动播放  </span></span><br><span class="line">    $(<span class="string">".banner-focus"</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        clearInterval(picTimer);  </span><br><span class="line">    &#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        picTimer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">            <span class="keyword">if</span>(index === len) &#123; <span class="comment">//如果索引值等于li元素个数，说明最后一张图播放完毕，接下来要显示第一张图，即调用showFirPic()，然后将索引值清零  </span></span><br><span class="line">                index = <span class="number">0</span>;  </span><br><span class="line">                showFirstPic(len, sWidth);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//如果索引值不等于li元素个数，按普通状态切换，调用showPics()  </span></span><br><span class="line">                showPics(index, sWidth);  </span><br><span class="line">            &#125;  </span><br><span class="line">            index++;  </span><br><span class="line">        &#125;,<span class="number">4000</span>); <span class="comment">//此2000代表自动播放的间隔，单位：毫秒  </span></span><br><span class="line">    &#125;); </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//显示图片函数，根据接收的index值显示相应的内容  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPics</span>(<span class="params">index, sWidth</span>) </span>&#123; <span class="comment">//普通切换  </span></span><br><span class="line">    <span class="keyword">var</span> nowLeft = - (index * sWidth); <span class="comment">//根据index值计算ul元素的left值  </span></span><br><span class="line">    $(<span class="string">".banner-focus ul"</span>).stop(<span class="literal">true</span>,<span class="literal">false</span>).animate(&#123;<span class="string">"left"</span>:nowLeft&#125;,<span class="number">500</span>); <span class="comment">//通过animate()调整ul元素滚动到计算出的position  </span></span><br><span class="line">    <span class="comment">// $("#focus div.btn span").animate(&#123;"opacity":"0.4"&#125;,300).eq(index).animate(&#123;"opacity":"1"&#125;,100); //为当前的按钮切换到选中的效果  </span></span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//最后一张图自动切换到第一张图时专用  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showFirstPic</span>(<span class="params">len, sWidth</span>) </span>&#123; </span><br><span class="line">    $(<span class="string">".banner-focus ul"</span>).append($(<span class="string">".banner-focus ul li:first"</span>).clone());<span class="comment">//为了达到从最右边到最左边还是往左移动效果，而不是往右移动  </span></span><br><span class="line">    <span class="keyword">var</span> nowLeft = - (len * sWidth); <span class="comment">//通过li元素个数计算ul元素的left值，也就是最后一个li元素的右边  </span></span><br><span class="line">    $(<span class="string">".banner-focus ul"</span>).stop(<span class="literal">true</span>,<span class="literal">false</span>).animate(&#123;<span class="string">"left"</span>:nowLeft&#125;,<span class="number">500</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        <span class="comment">//通过callback，在动画结束后把ul元素重新定位到起点，然后删除最后一个复制过去的元素  </span></span><br><span class="line">        $(<span class="string">".banner-focus ul"</span>).css(<span class="string">"left"</span>,<span class="string">"0"</span>);  </span><br><span class="line">        $(<span class="string">".banner-focus ul li:last"</span>).remove();  </span><br><span class="line">    &#125;);   </span><br><span class="line">    <span class="comment">// $("#focus div.btn span").animate(&#123;"opacity":"0.4"&#125;,300).eq(index).animate(&#123;"opacity":"1"&#125;,100); //为当前的按钮切换到选中的效果  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>setInterval()函数用来不断调用内容，为了让一开始轮播图自动滚动，要直接用setInterval函数然后实现鼠标聚焦内容的时候停止滚动，使之hover用clearInterval使其停止，然后用callback回调函数继续滚动</p>
</li>
<li><p>滚动原理是通过<code>position:absolute</code>然后使用left来指定展示哪一张图片</p>
</li>
<li><p>由于我并没有指定图像大小，所以我在此处设置了图像宽度为<code>width:100%</code>来自动调整，那么此时li的父元素ul会是所有图片宽度之和，根据<code>width:100%</code>会参照其父元素的原因，我在此处指定了li的宽度，为ul宽度的1/(len+1),len+1是因为会复制一张图片</p>
</li>
</ul>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>还有一种轮播图是用纯CSS效果写的，目前还没有细读代码，纯css的局限性是似乎不能指定显示哪一张图片，而是让其自动滚动。</p>

</article>



    </div>

    <!-- footer部分 -->
    <!-- footer部分 -->
<div id="footer-outer" class="footer-outer">
  <div id="footer-inner" class="footer-inner">
    <span class="footer-left">© Xiaoqi </span>
    <span class="footer-right">Hexo Theme Graffiti by Xiaoqi</span>
  </div>
</div>  
  </div>

</div>



  <!-- scripts list from theme config.yml -->
  
    <script src="/js/jquery-3.2.1.js"></script>
  
    <script src="/js/graffiti.js"></script>
  


</body>
</html>
